<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PONG - Versión Épica</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0d1b2a 100%);
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }

        .container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .score-board {
            position: absolute;
            top: 30px;
            width: 100%;
            display: flex;
            justify-content: space-around;
            z-index: 10;
            font-size: 48px;
            font-weight: bold;
            color: #00ff88;
            text-shadow: 0 0 20px #00ff88, 0 0 40px #00ff44;
            letter-spacing: 10px;
        }

        canvas {
            background: radial-gradient(ellipse at center, #0a1428 0%, #0a0e27 100%);
            box-shadow: 0 0 40px rgba(0, 255, 136, 0.3), inset 0 0 40px rgba(0, 255, 136, 0.1);
            border: 2px solid #00ff88;
            display: block;
            max-width: 90vw;
            max-height: 90vh;
            aspect-ratio: 1280 / 720;
        }

        .info {
            position: absolute;
            bottom: 20px;
            color: #00ff88;
            font-size: 16px;
            text-shadow: 0 0 10px #00ff88;
            text-align: center;
            z-index: 10;
        }

        .pause-menu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(10, 14, 39, 0.95);
            padding: 40px 60px;
            border: 3px solid #00ff88;
            border-radius: 10px;
            text-align: center;
            z-index: 20;
            display: none;
            box-shadow: 0 0 40px rgba(0, 255, 136, 0.5);
        }

        .pause-menu h1 {
            color: #00ff88;
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 0 20px #00ff88;
        }

        .pause-menu p {
            color: #00ff88;
            font-size: 20px;
            margin-bottom: 30px;
        }

        .pause-menu button {
            background: #00ff88;
            color: #0a0e27;
            border: none;
            padding: 12px 30px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        .pause-menu button:hover {
            background: #00ff44;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.8);
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="score-board">
            <div id="scoreLeft">0</div>
            <div id="scoreRight">0</div>
        </div>
        <canvas id="pongCanvas"></canvas>
        <div class="info">
            <p>ESPACIO para pausar/reanudar | P para reiniciar</p>
        </div>
        <div class="pause-menu" id="pauseMenu">
            <h1>PAUSA</h1>
            <p>Presiona ESPACIO para continuar</p>
            <button onclick="resetGame()">REINICIAR JUEGO</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('pongCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = 1280;
        canvas.height = 720;

        // Configuración del juego
        const gameState = {
            running: true,
            paused: false
        };

        // Paletas
        const paddleHeight = 120;
        const paddleWidth = 15;
        const paddleSpeed = 6;

        const leftPaddle = {
            x: 20,
            y: canvas.height / 2 - paddleHeight / 2,
            width: paddleWidth,
            height: paddleHeight,
            dy: 0,
            score: 0
        };

        const rightPaddle = {
            x: canvas.width - paddleWidth - 20,
            y: canvas.height / 2 - paddleHeight / 2,
            width: paddleWidth,
            height: paddleHeight,
            dy: 0,
            score: 0
        };

        // Bola
        const ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 10,
            dx: 5,
            dy: 5,
            speed: 5
        };

        // Partículas
        const particles = [];

        class Particle {
            constructor(x, y, vx, vy, color, life) {
                this.x = x;
                this.y = y;
                this.vx = vx;
                this.vy = vy;
                this.color = color;
                this.life = life;
                this.maxLife = life;
                this.size = Math.random() * 4 + 2;
            }

            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.2; // gravedad
                this.life--;
            }

            draw() {
                const alpha = this.life / this.maxLife;
                ctx.globalAlpha = alpha;
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.globalAlpha = 1;
            }
        }

        function createParticles(x, y, count = 10, color = '#00ff88') {
            for (let i = 0; i < count; i++) {
                const angle = (Math.PI * 2 * i) / count;
                const speed = Math.random() * 3 + 2;
                const vx = Math.cos(angle) * speed;
                const vy = Math.sin(angle) * speed;
                particles.push(new Particle(x, y, vx, vy, color, 30));
            }
        }

        // Entrada del teclado
        const keys = {};

        window.addEventListener('keydown', (e) => {
            keys[e.key.toLowerCase()] = true;

            if (e.key === ' ') {
                e.preventDefault();
                togglePause();
            }
            if (e.key.toLowerCase() === 'p') {
                resetGame();
            }
        });

        window.addEventListener('keyup', (e) => {
            keys[e.key.toLowerCase()] = false;
        });

        function togglePause() {
            gameState.paused = !gameState.paused;
            document.getElementById('pauseMenu').style.display = gameState.paused ? 'block' : 'none';
        }

        function resetGame() {
            ball.x = canvas.width / 2;
            ball.y = canvas.height / 2;
            ball.dx = (Math.random() > 0.5 ? 1 : -1) * 5;
            ball.dy = (Math.random() - 0.5) * 5;
            leftPaddle.score = 0;
            rightPaddle.score = 0;
            gameState.paused = false;
            document.getElementById('pauseMenu').style.display = 'none';
            updateScore();
        }

        function updatePaddles() {
            // Paleta izquierda (A y Z)
            if (keys['a'] && leftPaddle.y > 0) {
                leftPaddle.y -= paddleSpeed;
            }
            if (keys['z'] && leftPaddle.y < canvas.height - paddleHeight) {
                leftPaddle.y += paddleSpeed;
            }

            // Paleta derecha (Flechas arriba y abajo)
            if (keys['arrowup'] && rightPaddle.y > 0) {
                rightPaddle.y -= paddleSpeed;
            }
            if (keys['arrowdown'] && rightPaddle.y < canvas.height - paddleHeight) {
                rightPaddle.y += paddleSpeed;
            }
        }

        function updateBall() {
            ball.x += ball.dx;
            ball.y += ball.dy;

            // Rebote en superior e inferior
            if (ball.y - ball.radius < 0 || ball.y + ball.radius > canvas.height) {
                ball.dy *= -1;
                ball.y = Math.max(ball.radius, Math.min(canvas.height - ball.radius, ball.y));
                createParticles(ball.x, ball.y, 8, '#ff00ff');
            }

            // Colisión paleta izquierda
            if (ball.x - ball.radius < leftPaddle.x + leftPaddle.width &&
                ball.y > leftPaddle.y &&
                ball.y < leftPaddle.y + leftPaddle.height) {
                ball.dx = Math.abs(ball.dx);
                ball.x = leftPaddle.x + leftPaddle.width + ball.radius;
                const collidePoint = ball.y - (leftPaddle.y + leftPaddle.height / 2);
                ball.dy = (collidePoint / (leftPaddle.height / 2)) * 5;
                ball.speed *= 1.02;
                createParticles(ball.x, ball.y, 15, '#00ff88');
            }

            // Colisión paleta derecha
            if (ball.x + ball.radius > rightPaddle.x &&
                ball.y > rightPaddle.y &&
                ball.y < rightPaddle.y + rightPaddle.height) {
                ball.dx = -Math.abs(ball.dx);
                ball.x = rightPaddle.x - ball.radius;
                const collidePoint = ball.y - (rightPaddle.y + rightPaddle.height / 2);
                ball.dy = (collidePoint / (rightPaddle.height / 2)) * 5;
                ball.speed *= 1.02;
                createParticles(ball.x, ball.y, 15, '#ff00ff');
            }

            // Gol
            if (ball.x < 0) {
                rightPaddle.score++;
                createParticles(canvas.width / 2, canvas.height / 2, 30, '#00ff44');
                resetBall();
            }
            if (ball.x > canvas.width) {
                leftPaddle.score++;
                createParticles(canvas.width / 2, canvas.height / 2, 30, '#ff00ff');
                resetBall();
            }

            updateScore();
        }

        function resetBall() {
            ball.x = canvas.width / 2;
            ball.y = canvas.height / 2;
            ball.dx = (Math.random() > 0.5 ? 1 : -1) * 5;
            ball.dy = (Math.random() - 0.5) * 5;
            ball.speed = 5;
        }

        function updateScore() {
            document.getElementById('scoreLeft').textContent = leftPaddle.score;
            document.getElementById('scoreRight').textContent = rightPaddle.score;
        }

        function drawPaddle(paddle) {
            // Efecto de brillo
            ctx.shadowColor = '#00ff88';
            ctx.shadowBlur = 15;
            ctx.fillStyle = '#00ff88';
            ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);

            // Brillo adicional
            ctx.fillStyle = 'rgba(0, 255, 136, 0.3)';
            ctx.fillRect(paddle.x - 5, paddle.y, paddle.width + 10, paddle.height);
            ctx.shadowColor = 'transparent';
        }

        function drawBall() {
            ctx.shadowColor = '#ff00ff';
            ctx.shadowBlur = 20;

            // Gradiente para la bola
            const gradient = ctx.createRadialGradient(ball.x, ball.y, 0, ball.x, ball.y, ball.radius);
            gradient.addColorStop(0, '#ffffff');
            gradient.addColorStop(0.5, '#ff00ff');
            gradient.addColorStop(1, '#8800ff');

            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fill();

            ctx.shadowColor = 'transparent';
        }

        function drawCenterLine() {
            ctx.strokeStyle = 'rgba(0, 255, 136, 0.3)';
            ctx.setLineDash([10, 10]);
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function updateParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update();
                if (particles[i].life <= 0) {
                    particles.splice(i, 1);
                } else {
                    particles[i].draw();
                }
            }
        }

        function draw() {
            // Fondo
            ctx.fillStyle = 'rgba(10, 20, 40, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawCenterLine();
            drawPaddle(leftPaddle);
            drawPaddle(rightPaddle);
            drawBall();
            updateParticles();
        }

        function gameLoop() {
            if (!gameState.paused) {
                updatePaddles();
                updateBall();
            }

            draw();
            requestAnimationFrame(gameLoop);
        }

        updateScore();
        gameLoop();
    </script>
</body>
</html>